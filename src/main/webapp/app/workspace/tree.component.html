<ng-template #rt let-r="result" let-t="term">
    <div>
        <span>{{r.breadcrumbS}}</span>
    </div>
</ng-template>
<div class="search-typehead">
    <div class="input-group">
        <input
            [ngbTypeahead]="searchtree"
            [resultTemplate]="rt"
            [inputFormatter]="formatter"
            [resultFormatter]="formatter"
            (selectItem)="onSelectLeaf($event.item)"
            class="form-control outline-secondary"
            placeholder="Cerca nel menu......"
            id="search-tree"/>
            <a class="input-group-addon btn"  
                (click)="refreshTree()" 
                placement="left"
                container="body" 
                ngbTooltip="Rigenera voci di menu">
                <i class="fa fa-refresh text-info"  [ngClass]="{'faa-spin animated' : isRequesting}"></i>
            </a>
    </div>
</div>
<tree-root [nodes]="nodes" class="tree-menu">
    <ng-template #treeNodeFullTemplate
            let-node="node"
            let-index="index"
            let-templates="templates">
        <div
            class="tree-node tree-node-level-{{ node.level }}"
            [class]="node.getClass()"
            [class.tree-node-expanded]="node.isExpanded && node.hasChildren"
            [class.tree-node-collapsed]="node.isCollapsed && node.hasChildren"
            [class.tree-node-leaf]="node.isLeaf"
            [class.tree-node-active]="node.isActive"
            [class.tree-node-focused]="node.isFocused">

            <div class="node-wrapper node-item" [style.padding-left]="node.getNodePadding()" (click)="toggleTreeNode(node)">
                <div class="node-content-wrapper row">
                    <span class="d-inline-block text-truncate col tree-col-label" placement="top" container="body" ngbTooltip="{{node.data.name}}">{{node.data.name}}</span>
                    <span *ngIf="!node.isLeaf" class="chevron float-right col col-auto">
                        <i *ngIf="!node.isExpanded" class="fa fa-chevron-right" aria-hidden="true"></i>
                        <i *ngIf="node.isExpanded"  class="fa fa-chevron-up" aria-hidden="true"></i>
                    </span>
                </div>
            </div>
            <tree-node-children [node]="node" [templates]="templates">
            </tree-node-children>
        </div>
    </ng-template>
</tree-root>            
